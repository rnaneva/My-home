<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
<head>

    <th:block th:fragment="head">
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="_csrf" th:content="${_csrf.token}"/>
        <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
        <link rel="stylesheet" href="/css/reset.css">
        <link rel="stylesheet" href="/css/style.css">
        <link rel="stylesheet" href="/css/media.css">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.3.0/css/all.css"/>
        <link rel="icon" sizes="180x180" type="image/x-icon" href="/images/favicon.ico">
    </th:block>
    <title></title>

</head>
<body>


<th:block th:fragment="nav">
    <nav class="main-nav">
        <h2 id="nav-logo">
            <a href="/">my-ho<span class="house-logo"><img src="/images/favicon.ico" alt="M"></span>e</a>
        </h2>
        <ul class="list">
            <th:block sec:authorize="!isAuthenticated()">
                <li class="list-element">
                    <a class="element-text" th:href="@{/users/login}">Login</a>
                </li>
                <li class="list-element">
                    <a class="element-text" th:href="@{/users/register}">Register</a>
                </li>
            </th:block>

            <th:block sec:authorize="!isAuthenticated() || hasRole('USER')" >
                <li class="list-element">
                    <a class="element-text" th:href="@{/offers/rent}">Rent</a>
                </li>
                <li class="list-element">
                    <a class="element-text" th:href="@{/offers/sale}">Sale</a>
                </li>
                <li class="list-element">
                    <a class="element-text" th:href="@{/agencies}">Agencies</a>
                </li>
            </th:block>



            <th:block sec:authorize="isAuthenticated()">
                <th:block sec:authorize="hasRole('ADMIN')">
                    <li class="list-element">
                        <a class="element-text" th:href="@{/admin}">Admin</a>
                    </li>
                </th:block>
                <th:block  sec:authorize="hasRole('MODERATOR')" th:with="userId=${#authentication.getPrincipal().getVisibleId()}">



                    <li class="list-element">
                        <a class="element-text" th:href="@{/agency/{id}(id = ${userId})}">Agency</a>
                    </li>

                    <li id="dropdown-btn">
                        <a class="element-text" th:href="@{/agency/profile/{id}(id = ${userId})}" >Profile
                            <i class="fa fa-caret-right"></i>
                        </a>
                        <span id="dropdown-elements" class="hide-elements" >
                            <a class="element-text drop-element"  th:href="@{/agency/profile/create/{id}(id = ${userId})}">Create</a>
                            <a class="element-text drop-element" th:href="@{/agency/profile/edit/{id}(id = ${userId})}">Edit</a>
                        </span>
                    </li>

                </th:block>
            </th:block>


            <li sec:authorize="isAuthenticated()" class="logout-form list-element">
                <form
                        th:method="post"
                        th:action="@{/logout}">
                    <input class="element-text logout-btn" type="submit" value="Logout">
                    <!--          <a class="element-text" >Logout</a>-->
                </form>
            </li>

        </ul>

    </nav>
    <script type="text/javascript" src="/js/nav.js"></script>
</th:block>


<th:block th:fragment="footer">
    <footer id="contacts">

        <h2 class="footer-logo">my-home.now</h2>

        <section>
            <article>
                <address><i class="fa-sharp fa-solid fa-location-dot"></i>Sofia 1000, 12 Serdika, ground floor
                </address>
                <p><i class="fa-solid fa-phone"></i>+359 885 00 00 11</p>
                <p><i class="fa-solid fa-envelope"></i><a class="email" href="mailto:office@my-home.now">office@my-home.now</a></p>
            </article>

            <article>
                <h4  time>WORKING HOURS</h4>
                <p><i>Monday to Friday:</i>10 AM to 9 PM</p>
                <p><i>Saturday and Sunday:</i> Closed </p>
            </article>

            <article class="center">
                <h4>CONNECT WITH US</h4>
                <div class="icons"><a href=""><i class="fa-brands fa-facebook"></i></a>
                    <a href=""><i class="fa-brands fa-instagram"></i></a>
                    <a href=""><i class="fa-brands fa-twitter"></i></a>
                    <a href=""><i class="fa-brands fa-viber"></i></a>
                </div>
            </article>
        </section>



        <p id="copy-right">&copy Copyright my-home.now 2023</p>
    </footer>
</th:block>



</body>
</html>